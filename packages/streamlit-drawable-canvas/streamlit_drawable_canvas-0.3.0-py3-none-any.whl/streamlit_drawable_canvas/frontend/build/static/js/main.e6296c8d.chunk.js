/*! For license information please see main.e6296c8d.chunk.js.LICENSE.txt */
(this.webpackJsonpdrawable_canvas=this.webpackJsonpdrawable_canvas||[]).push([[0],{22:function(e,t,n){e.exports=n(39)},35:function(e,t){},36:function(e,t){},37:function(e,t){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a,o=n(8),r=n.n(o),s=n(19),i=n.n(s),c=n(6),u=n(0),l=n(3),h=n(1),f=n(2),d=n(20),v=n.n(d),m=n(7),g=n(21),b=n(14),w=function(){function e(t,n,a,o){var r=this;Object(u.a)(this,e),this.dataTable=void 0,this.indexTable=void 0,this.columnsTable=void 0,this.styler=void 0,this.getCell=function(e,t){var n=e<r.headerRows&&t<r.headerColumns,a=e>=r.headerRows&&t<r.headerColumns,o=e<r.headerRows&&t>=r.headerColumns;if(n){var s=["blank"];return t>0&&s.push("level"+e),{type:"blank",classNames:s.join(" "),content:""}}if(o){var i=t-r.headerColumns;return{type:"columns",classNames:["col_heading","level"+e,"col"+i].join(" "),content:r.getContent(r.columnsTable,i,e)}}if(a){var c=e-r.headerRows,u=["row_heading","level"+t,"row"+c];return{type:"index",id:"T_".concat(r.uuid,"level").concat(t,"_row").concat(c),classNames:u.join(" "),content:r.getContent(r.indexTable,c,t)}}var l=e-r.headerRows,h=t-r.headerColumns,f=["data","row"+l,"col"+h],d=r.styler?r.getContent(r.styler.displayValuesTable,l,h):r.getContent(r.dataTable,l,h);return{type:"data",id:"T_".concat(r.uuid,"row").concat(l,"_col").concat(h),classNames:f.join(" "),content:d}},this.getContent=function(e,t,n){var a=e.getColumnAt(n);if(null===a)return"";switch(r.getColumnTypeId(e,n)){case b.b.Timestamp:return r.nanosToDate(a.get(t));default:return a.get(t)}},this.dataTable=b.a.from(t),this.indexTable=b.a.from(n),this.columnsTable=b.a.from(a),this.styler=o?{caption:o.get("caption"),displayValuesTable:b.a.from(o.get("displayValues")),styles:o.get("styles"),uuid:o.get("uuid")}:void 0}return Object(l.a)(e,[{key:"getColumnTypeId",value:function(e,t){return e.schema.fields[t].type.typeId}},{key:"nanosToDate",value:function(e){return new Date(e/1e6)}},{key:"rows",get:function(){return this.indexTable.length+this.columnsTable.numCols}},{key:"columns",get:function(){return this.indexTable.numCols+this.columnsTable.length}},{key:"headerRows",get:function(){return this.rows-this.dataRows}},{key:"headerColumns",get:function(){return this.columns-this.dataColumns}},{key:"dataRows",get:function(){return this.dataTable.length}},{key:"dataColumns",get:function(){return this.dataTable.numCols}},{key:"uuid",get:function(){return this.styler&&this.styler.uuid}},{key:"caption",get:function(){return this.styler&&this.styler.caption}},{key:"styles",get:function(){return this.styler&&this.styler.styles}},{key:"table",get:function(){return this.dataTable}},{key:"index",get:function(){return this.indexTable}},{key:"columnTable",get:function(){return this.columnsTable}}]),e}();!function(e){e.COMPONENT_READY="streamlit:componentReady",e.SET_COMPONENT_VALUE="streamlit:setComponentValue",e.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(a||(a={}));var y=function e(){Object(u.a)(this,e)};y.API_VERSION=1,y.RENDER_EVENT="streamlit:render",y.events=new g.a,y.registeredMessageListener=!1,y.lastFrameHeight=void 0,y.setComponentReady=function(){y.registeredMessageListener||(window.addEventListener("message",y.onMessageEvent),y.registeredMessageListener=!0),y.sendBackMsg(a.COMPONENT_READY,{apiVersion:y.API_VERSION})},y.setFrameHeight=function(e){void 0===e&&(e=document.body.scrollHeight),e!==y.lastFrameHeight&&(y.lastFrameHeight=e,y.sendBackMsg(a.SET_FRAME_HEIGHT,{height:e}))},y.setComponentValue=function(e){y.sendBackMsg(a.SET_COMPONENT_VALUE,{value:e})},y.onMessageEvent=function(e){switch(e.data.type){case y.RENDER_EVENT:y.onRenderMessage(e.data)}},y.onRenderMessage=function(e){var t=e.args;null==t&&(console.error("Got null args in onRenderMessage. This should never happen"),t={});var n=e.dfs&&e.dfs.length>0?y.argsDataframeToObject(e.dfs):{};t=Object(m.a)(Object(m.a)({},t),n);var a=Boolean(e.disabled),o=new CustomEvent(y.RENDER_EVENT,{detail:{disabled:a,args:t}});y.events.dispatchEvent(o)},y.argsDataframeToObject=function(e){var t=e.map((function(e){var t=e.key,n=e.value;return[t,y.toArrowTable(n)]}));return Object.fromEntries(t)},y.toArrowTable=function(e){var t=e.data,n=t.data,a=t.index,o=t.columns;return new w(n,a,o)},y.sendBackMsg=function(e,t){window.parent.postMessage(Object(m.a)({isStreamlitMessage:!0,type:e},t),"*")};r.a.PureComponent;var p=n(10),E=function e(t){Object(u.a)(this,e),this._canvas=void 0,this._canvas=t},C=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"configureCanvas",value:function(e){var t=e.strokeWidth,n=e.strokeColor;return this._canvas.isDrawingMode=!0,this._canvas.freeDrawingBrush.width=t,this._canvas.freeDrawingBrush.color=n,function(){}}}]),n}(E),k=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).isMouseDown=!1,e.strokeWidth=10,e.strokeColor="#ffffff",e.currentLine=new p.fabric.Line,e}return Object(l.a)(n,[{key:"configureCanvas",value:function(e){var t=this;this._canvas.isDrawingMode=!1,this._canvas.selection=!1,this._canvas.forEachObject((function(e){return e.selectable=e.evented=!1}));var n=e.strokeWidth,a=e.strokeColor;return this.strokeWidth=n,this.strokeColor=a,this._canvas.on("mouse:down",(function(e){return t.onMouseDown(e)})),this._canvas.on("mouse:move",(function(e){return t.onMouseMove(e)})),this._canvas.on("mouse:up",(function(e){return t.onMouseUp(e)})),this._canvas.on("mouse:out",(function(e){return t.onMouseOut(e)})),function(){t._canvas.off("mouse:down"),t._canvas.off("mouse:move"),t._canvas.off("mouse:up"),t._canvas.off("mouse:out")}}},{key:"onMouseDown",value:function(e){var t=this._canvas;this.isMouseDown=!0;var n=t.getPointer(e.e),a=[n.x,n.y,n.x,n.y];this.currentLine=new p.fabric.Line(a,{strokeWidth:this.strokeWidth,fill:this.strokeColor,stroke:this.strokeColor,originX:"center",originY:"center",selectable:!1,evented:!1}),t.add(this.currentLine)}},{key:"onMouseMove",value:function(e){if(this.isMouseDown){var t=this._canvas,n=t.getPointer(e.e);this.currentLine.set({x2:n.x,y2:n.y}),this.currentLine.setCoords(),t.renderAll()}}},{key:"onMouseUp",value:function(e){this.isMouseDown=!1}},{key:"onMouseOut",value:function(e){this.isMouseDown=!1}}]),n}(E),M=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).isMouseDown=!1,e.fillColor="#ffffff",e.strokeWidth=10,e.strokeColor="#ffffff",e.currentRect=new p.fabric.Rect,e.currentStartX=0,e.currentStartY=0,e}return Object(l.a)(n,[{key:"configureCanvas",value:function(e){var t=this;this._canvas.isDrawingMode=!1,this._canvas.selection=!1,this._canvas.forEachObject((function(e){return e.selectable=e.evented=!1}));var n=e.strokeWidth,a=e.strokeColor,o=e.fillColor;return this.strokeWidth=n,this.strokeColor=a,this.fillColor=o,this._canvas.on("mouse:down",(function(e){return t.onMouseDown(e)})),this._canvas.on("mouse:move",(function(e){return t.onMouseMove(e)})),this._canvas.on("mouse:up",(function(e){return t.onMouseUp(e)})),this._canvas.on("mouse:out",(function(e){return t.onMouseOut(e)})),function(){t._canvas.off("mouse:down"),t._canvas.off("mouse:move"),t._canvas.off("mouse:up"),t._canvas.off("mouse:out")}}},{key:"onMouseDown",value:function(e){var t=this._canvas;this.isMouseDown=!0;var n=t.getPointer(e.e);this.currentStartX=n.x,this.currentStartY=n.y,this.currentRect=new p.fabric.Rect({left:this.currentStartX,top:this.currentStartY,originX:"left",originY:"top",width:n.x-this.currentStartX,height:n.y-this.currentStartY,stroke:this.strokeColor,strokeWidth:this.strokeWidth,fill:this.fillColor,transparentCorners:!1,selectable:!1,evented:!1,strokeUniform:!0,noScaleCache:!1,angle:0}),t.add(this.currentRect)}},{key:"onMouseMove",value:function(e){if(this.isMouseDown){var t=this._canvas,n=t.getPointer(e.e);this.currentStartX>n.x&&this.currentRect.set({left:Math.abs(n.x)}),this.currentStartY>n.y&&this.currentRect.set({top:Math.abs(n.y)}),this.currentRect.set({width:Math.abs(this.currentStartX-n.x)}),this.currentRect.set({height:Math.abs(this.currentStartY-n.y)}),this.currentRect.setCoords(),t.renderAll()}}},{key:"onMouseUp",value:function(e){this.isMouseDown=!1}},{key:"onMouseOut",value:function(e){this.isMouseDown=!1}}]),n}(E),_=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"configureCanvas",value:function(e){var t=this._canvas;return t.isDrawingMode=!1,t.selection=!0,t.forEachObject((function(e){return e.selectable=e.evented=!0})),t.on("mouse:dblclick",(function(){t.remove(t.getActiveObject()),O(t)})),function(){t.off("mouse:dblclick")}}}]),n}(E);function O(e){e.renderAll();var t=e.getContext().getImageData(0,0,e.getWidth(),e.getHeight()),n=Array.from(t.data);y.setComponentValue({data:n,width:t.width,height:t.height,raw:e.toObject()})}var T=function(e){var t=function(t){Object(h.a)(a,t);var n=Object(f.a)(a);function a(t){var o;return Object(u.a)(this,a),(o=n.call(this,t)).componentDidMount=function(){y.events.addEventListener(y.RENDER_EVENT,o.onRenderEvent),y.setComponentReady()},o.componentWillUnmount=function(){y.events.removeEventListener(y.RENDER_EVENT,o.onRenderEvent)},o.onRenderEvent=function(e){var t=e;o.setState({renderData:t.detail})},o.render=function(){return null!=o.state.componentError?r.a.createElement("div",null,r.a.createElement("h1",null,"Component Error"),r.a.createElement("span",null,o.state.componentError.message)):null==o.state.renderData?null:r.a.createElement(e,{width:window.innerWidth,disabled:o.state.renderData.disabled,args:o.state.renderData.args})},o.state={renderData:void 0,componentError:void 0},o}return a}(r.a.PureComponent);return t.getDerivedStateFromError=function(e){return{componentError:e}},v()(t,e)}((function(e){var t=e.args,n=t.canvasWidth,a=t.canvasHeight,s=t.backgroundColor,i=t.backgroundImage,u=t.drawingMode,l=Object(o.useState)(new p.fabric.Canvas("")),h=Object(c.a)(l,2),f=h[0],d=h[1],v=Object(o.useState)(new p.fabric.StaticCanvas("")),m=Object(c.a)(v,2),g=m[0],b=m[1];return Object(o.useEffect)((function(){var e=new p.fabric.Canvas("c",{enableRetinaScaling:!1}),t=new p.fabric.StaticCanvas("imgC",{enableRetinaScaling:!1});d(e),b(t),y.setFrameHeight()}),[a,n]),Object(o.useEffect)((function(){if(f){f.setBackgroundColor(s,(function(){if(i){var e=g.getContext().createImageData(n,a);e.data.set(i),g.getContext().putImageData(e,0,0)}O(f)})),y.setFrameHeight();var e={freedraw:new C(f),line:new k(f),rect:new M(f),transform:new _(f)}[u].configureCanvas(t),o=function(){O(f)};return f.on("mouse:up",o),function(){e(),f.off("mouse:up",o)}}})),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{style:{position:"absolute",top:0,left:0,zIndex:0}},r.a.createElement("canvas",{id:"imgC",width:n,height:a})),r.a.createElement("div",{style:{position:"absolute",top:0,left:0,zIndex:10}},r.a.createElement("canvas",{id:"c",width:n,height:a})))}));n(38);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.e6296c8d.chunk.js.map