{# <!--

  File        : templates/_macros.html
  Maintainer  : Felix C. Stegerman <flx@obfusk.net>
  Date        : 2020-08-05

  Copyright   : Copyright (C) 2020  Felix C. Stegerman
  Version     : v0.2.0
  License     : AGPLv3+

--> #}
{% macro input(id, name, value, ph, af = True, copy = False, mb = 2) %}
  {% set m = "dark" if dark else "light" %}
  <div class="{{ m }}-mode input-group mr-sm-2 mb-{{ mb }} flex-grow-1">
    <div class="input-group-prepend">
      <button type="button" title="あ↔ア"
          class="jap convert-kana input-group-text btn btn-dark"
        >あ</button>
    </div>
    <input type="text" class="jap form-control"
      id="{{ id }}" name="{{ name }}" value="{{ value }}" required
      placeholder="{{ ph }}" {% if af %}autofocus{% endif %} />
    <div class="input-group-append">
      {% if copy %}
        <button type="button" style="display: none;"
            class="copy-input input-group-text btn btn-dark">
          <!-- https://www.flaticon.com/free-icon/copy-content_60990 -->
          <svg xmlns="http://www.w3.org/2000/svg" class="icon"
              viewbox="0 0 561 561" focusable="false">
            <title>copy</title>
            <path
              d="M395.25,0h-306c-28.05,0-51,22.95-51,51v357h51V51h306V0z M471.75,102h-280.5c-28.05,0-51,22.95-51,51v357 c0,28.05,22.95,51,51,51h280.5c28.05,0,51-22.95,51-51V153C522.75,124.95,499.8,102,471.75,102z M471.75,510h-280.5V153h280.5V510 z"
              fill="currentColor" />
          </svg>
        </button>
      {% endif %}
      <button type="button"
          class="clear-input input-group-text btn btn-dark">
        <!-- https://www.flaticon.com/free-icon/close-button_61155 -->
        <svg xmlns="http://www.w3.org/2000/svg" class="icon"
            viewbox="0 0 357 357" focusable="false">
          <title>clear</title>
          <polygon
            points="357,35.7 321.3,0 178.5,142.8 35.7,0 0,35.7 142.8,178.5 0,321.3 35.7,357 178.5,214.2 321.3,357 357,321.3 214.2,178.5"
            fill="currentColor" />
        </svg>
      </button>
    </div>
  </div>
{% endmacro %}
{% macro search(action, label, go, id, name, value, ph, af = True) %}
  <div class="card">
    <form class="card-body" action="{{ action }}">
      <div class="form-group form-inline justify-content-end mb-0">
        <label class="sr-only" for="{{ id }}">{{ label }}</label>
        {{ input(id, name, value, ph, af) }}
        <button class="btn btn-primary mb-2">{{ go }}</button>
      </div>
      {{ caller() }}
    </form>
  </div>
{% endmacro %}
