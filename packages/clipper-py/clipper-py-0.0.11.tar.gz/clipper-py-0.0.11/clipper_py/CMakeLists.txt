include(GNUInstallDirs)

SET(PYCLIPPER_BOOST_PYTHON_SRC
        ../clipper/clipper.cpp
        clipper.cpp
        path.cpp
        int-point.cpp
        clipper-py.cpp)

FIND_PACKAGE(Boost REQUIRED)
FIND_PACKAGE(Boost QUIET COMPONENTS python python38)

set(Boost_PYTHON_LIBRARY ${Boost_PYTHON38_LIBRARY})
set(Python_ADDITIONAL_VERSIONS 3.8)

FIND_PACKAGE(PythonLibs 3.8 REQUIRED)
SET(PYDEXTENSION FALSE)

INCLUDE_DIRECTORIES( ./ ${PYTHON_INCLUDE_PATH} ${BOOST_INCLUDE_DIR} )
ADD_LIBRARY(clipper_py SHARED ${PYCLIPPER_BOOST_PYTHON_SRC})
SET_TARGET_PROPERTIES(clipper_py PROPERTIES PREFIX "_")
TARGET_LINK_LIBRARIES(clipper_py ${Boost_PYTHON_LIBRARY} ${PYTHON_LIBRARIES})