

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Producer–Consumer &mdash; summer 0.7.5.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Miscellaneous modules" href="api-misc.html" />
    <link rel="prev" title="AOP modules" href="api-aop.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> summer
          

          
          </a>

          
            
            
              <div class="version">
                0.7.5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic-concepts.html">Basic Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">summer API doc</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="api-core.html">Core modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-orm.html">ORM – object relational mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-ldap.html">LDAP – lightweight directory access)</a></li>
<li class="toctree-l2"><a class="reference internal" href="api-aop.html">AOP modules</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Producer–Consumer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-summer.pc"><strong>pc</strong> – generic producer–consumer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-summer.pcg"><strong>pcg</strong> – producer–consumer with generator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api-misc.html">Miscellaneous modules</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">summer</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="api.html">summer API doc</a> &raquo;</li>
        
      <li>Producer–Consumer</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/api-pc.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="producer-consumer">
<h1>Producer–Consumer<a class="headerlink" href="#producer-consumer" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-summer.pc">
<span id="pc-generic-producer-consumer"></span><h2><strong>pc</strong> – generic producer–consumer<a class="headerlink" href="#module-summer.pc" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pc</span></code> module defines necessary classes for producer-consumer
multi-threaded problem.</p>
<p>Usual use case is to create some kind of (thread-safe) generator (usually
shared by py:class:<cite>Producer</cite> instances).  Obtain single value in
<a class="reference internal" href="#summer.pc.Producer.produce" title="summer.pc.Producer.produce"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Producer.produce()</span></code></a> (obtaining value must be thread-safe as several
producers can obtain value at once).  Process the value and return the
result.</p>
<p>Once returned, it can be consumed by <a class="reference internal" href="#summer.pc.Consumer" title="summer.pc.Consumer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Consumer</span></code></a> instances – and
results can be stored in some kind of (thread-safe) result (multiple
consumers at once can store the value at once).</p>
<p><a class="reference internal" href="#summer.pc.ProducerConsumer" title="summer.pc.ProducerConsumer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerConsumer</span></code></a> engine manages necessary synchronization among
<a class="reference internal" href="#summer.pc.ProducerThread" title="summer.pc.ProducerThread"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerThread</span></code></a> and <a class="reference internal" href="#summer.pc.ConsumerThread" title="summer.pc.ConsumerThread"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConsumerThread</span></code></a> threads and
provides produced objects from <a class="reference internal" href="#summer.pc.Producer.produce" title="summer.pc.Producer.produce"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Producer.produce()</span></code></a> to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Consumer.consume()</span></code>.</p>
<p>Caller should ususually:</p>
<ol class="arabic simple">
<li><p>override <a class="reference internal" href="#summer.pc.Producer.produce" title="summer.pc.Producer.produce"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Producer.produce()</span></code></a></p></li>
<li><p>override <code class="xref py py-meth docutils literal notranslate"><span class="pre">Consumer.consume()</span></code></p></li>
<li><p>define some kind of thread-safe generator if required for
<a class="reference internal" href="#summer.pc.Producer" title="summer.pc.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a> instances to obtain initial objects</p></li>
<li><p>define some kind of thread-safe result if required for
<a class="reference internal" href="#summer.pc.Consumer" title="summer.pc.Consumer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Consumer</span></code></a> instances to store results</p></li>
</ol>
<p>You can look in <code class="xref py py-class docutils literal notranslate"><span class="pre">summer.tests.pctest.ProducerConsumerTest</span></code> for
inspiration.</p>
<p>Please look at <a class="reference internal" href="#module-summer.pcg" title="summer.pcg"><code class="xref py py-mod docutils literal notranslate"><span class="pre">summer.pcg</span></code></a> module as a specific implementation of
producer–consumer that uses iterable as input, several producers are used
to iterate over it and produce values consumed by several consumers.</p>
<p>Thread count is determind based on target HW (number of cores available +
1).  You can try to experiment with this value.  For I/O heavy tasks you
can get usually better perfomance by increasing number of threads (as a
rule of thumb try twice the number of cores).</p>
<dl class="class">
<dt id="summer.pc.Producer">
<em class="property">class </em><code class="sig-prename descclassname">summer.pc.</code><code class="sig-name descname">Producer</code><a class="reference internal" href="_modules/summer/pc.html#Producer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.Producer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Producer object produces whatever is needed.  Override
<a class="reference internal" href="#summer.pc.Producer.produce" title="summer.pc.Producer.produce"><code class="xref py py-meth docutils literal notranslate"><span class="pre">produce()</span></code></a> method.</p>
<dl class="method">
<dt id="summer.pc.Producer.produce">
<code class="sig-name descname">produce</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; object<a class="reference internal" href="_modules/summer/pc.html#Producer.produce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.Producer.produce" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="xref py py-data docutils literal notranslate"><span class="pre">Producer.END_OF_PRODUCTION</span></code> object to indicate end of
production.</p>
</dd></dl>

<dl class="attribute">
<dt id="summer.pc.Producer.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#summer.pc.Producer.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="summer.pc.Consumer">
<em class="property">class </em><code class="sig-prename descclassname">summer.pc.</code><code class="sig-name descname">Consumer</code><a class="reference internal" href="_modules/summer/pc.html#Consumer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.Consumer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Consumer object consumes whatever is produces by <a class="reference internal" href="#summer.pc.Producer" title="summer.pc.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Producer</span></code></a>.
Override <code class="xref py py-meth docutils literal notranslate"><span class="pre">consume()</span></code> method.</p>
<dl class="attribute">
<dt id="summer.pc.Consumer.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#summer.pc.Consumer.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="summer.pc.ProducerConsumer">
<em class="property">class </em><code class="sig-prename descclassname">summer.pc.</code><code class="sig-name descname">ProducerConsumer</code><span class="sig-paren">(</span><em class="sig-param">producer: summer.pc.Producer</em>, <em class="sig-param">consumer: summer.pc.Consumer</em>, <em class="sig-param">producer_thread_count=9</em>, <em class="sig-param">consumer_thread_count=9</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ProducerConsumer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ProducerConsumer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p><a class="reference internal" href="#summer.pc.ProducerConsumer" title="summer.pc.ProducerConsumer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerConsumer</span></code></a> handles necessary synchronization among
producer and consumer threads.</p>
<p>Serves as a mediator among producers and consumers.</p>
<dl class="method">
<dt id="summer.pc.ProducerConsumer.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">producer: summer.pc.Producer</em>, <em class="sig-param">consumer: summer.pc.Consumer</em>, <em class="sig-param">producer_thread_count=9</em>, <em class="sig-param">consumer_thread_count=9</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ProducerConsumer.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ProducerConsumer.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates <a class="reference internal" href="#summer.pc.ProducerConsumer" title="summer.pc.ProducerConsumer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerConsumer</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>producer</strong> (<a class="reference internal" href="#summer.pc.Producer" title="summer.pc.Producer"><em>Producer</em></a>) – producer instance supplied by caller</p></li>
<li><p><strong>consumer</strong> (<a class="reference internal" href="#summer.pc.Consumer" title="summer.pc.Consumer"><em>Consumer</em></a>) – consumer instance supplied by caller</p></li>
<li><p><strong>producer_thread_count</strong> (<em>int</em>) – number of producer threads</p></li>
<li><p><strong>consumer_thread_count</strong> (<em>int</em>) – number of consumer threads</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="summer.pc.ProducerConsumer.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ProducerConsumer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ProducerConsumer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the producer–consumer engine.  Starts the threads and waits for
all of them to complete.</p>
</dd></dl>

<dl class="method">
<dt id="summer.pc.ProducerConsumer.object_produced">
<code class="sig-name descname">object_produced</code><span class="sig-paren">(</span><em class="sig-param">produced_object: object</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ProducerConsumer.object_produced"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ProducerConsumer.object_produced" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by <a class="reference internal" href="#summer.pc.ProducerThread" title="summer.pc.ProducerThread"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerThread</span></code></a> once the object is produced.</p>
</dd></dl>

<dl class="method">
<dt id="summer.pc.ProducerConsumer.object_consumed">
<code class="sig-name descname">object_consumed</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; object<a class="reference internal" href="_modules/summer/pc.html#ProducerConsumer.object_consumed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ProducerConsumer.object_consumed" title="Permalink to this definition">¶</a></dt>
<dd><p>Called by :py:class`ConsumerThread` when the object is being consumed.</p>
</dd></dl>

<dl class="method">
<dt id="summer.pc.ProducerConsumer.__str__">
<code class="sig-name descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ProducerConsumer.__str__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ProducerConsumer.__str__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return str(self).</p>
</dd></dl>

<dl class="attribute">
<dt id="summer.pc.ProducerConsumer.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#summer.pc.ProducerConsumer.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="summer.pc.ProducerThread">
<em class="property">class </em><code class="sig-prename descclassname">summer.pc.</code><code class="sig-name descname">ProducerThread</code><span class="sig-paren">(</span><em class="sig-param">producer_consumer: summer.pc.ProducerConsumer</em>, <em class="sig-param">producer: summer.pc.Producer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ProducerThread"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ProducerThread" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></p>
<p>Thread executing producer objects.</p>
<dl class="method">
<dt id="summer.pc.ProducerThread.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">producer_consumer: summer.pc.ProducerConsumer</em>, <em class="sig-param">producer: summer.pc.Producer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ProducerThread.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ProducerThread.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>This constructor should always be called with keyword arguments. Arguments are:</p>
<p><em>group</em> should be None; reserved for future extension when a ThreadGroup
class is implemented.</p>
<p><em>target</em> is the callable object to be invoked by the run()
method. Defaults to None, meaning nothing is called.</p>
<p><em>name</em> is the thread name. By default, a unique name is constructed of
the form “Thread-N” where N is a small decimal number.</p>
<p><em>args</em> is the argument tuple for the target invocation. Defaults to ().</p>
<p><em>kwargs</em> is a dictionary of keyword arguments for the target
invocation. Defaults to {}.</p>
<p>If a subclass overrides the constructor, it must make sure to invoke
the base class constructor (Thread.__init__()) before doing anything
else to the thread.</p>
</dd></dl>

<dl class="method">
<dt id="summer.pc.ProducerThread.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ProducerThread.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ProducerThread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="summer.pc.ConsumerThread">
<em class="property">class </em><code class="sig-prename descclassname">summer.pc.</code><code class="sig-name descname">ConsumerThread</code><span class="sig-paren">(</span><em class="sig-param">producer_consumer: summer.pc.ProducerConsumer</em>, <em class="sig-param">consumer: summer.pc.Consumer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ConsumerThread"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ConsumerThread" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">threading.Thread</span></code></p>
<p>Thread executing consumer objects.</p>
<dl class="method">
<dt id="summer.pc.ConsumerThread.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">producer_consumer: summer.pc.ProducerConsumer</em>, <em class="sig-param">consumer: summer.pc.Consumer</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ConsumerThread.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ConsumerThread.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>This constructor should always be called with keyword arguments. Arguments are:</p>
<p><em>group</em> should be None; reserved for future extension when a ThreadGroup
class is implemented.</p>
<p><em>target</em> is the callable object to be invoked by the run()
method. Defaults to None, meaning nothing is called.</p>
<p><em>name</em> is the thread name. By default, a unique name is constructed of
the form “Thread-N” where N is a small decimal number.</p>
<p><em>args</em> is the argument tuple for the target invocation. Defaults to ().</p>
<p><em>kwargs</em> is a dictionary of keyword arguments for the target
invocation. Defaults to {}.</p>
<p>If a subclass overrides the constructor, it must make sure to invoke
the base class constructor (Thread.__init__()) before doing anything
else to the thread.</p>
</dd></dl>

<dl class="method">
<dt id="summer.pc.ConsumerThread.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pc.html#ConsumerThread.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pc.ConsumerThread.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-summer.pcg">
<span id="pcg-producer-consumer-with-generator"></span><h2><strong>pcg</strong> – producer–consumer with generator<a class="headerlink" href="#module-summer.pcg" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">pcg</span></code> module is more specific producer–consumer implementation based
on common use case: If you need to iterate in parallel over a collection of
input values and invoke an operation for each item.</p>
<p>Typical usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyConsumer</span><span class="p">(</span><span class="n">Consumer</span><span class="p">):</span>

<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress</span><span class="p">:</span> <span class="n">Progress</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span> <span class="n">progress</span>

<span class="k">def</span> <span class="nf">consume</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">produced_object</span><span class="p">):</span>
    <span class="c1"># do whatever is required to do</span>
    <span class="bp">self</span><span class="o">...</span>
    <span class="c1"># indicate progress -- for example to some gui listener (progressbar, ...)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="o">.</span><span class="n">next_step</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">iterable</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">consumer</span> <span class="o">=</span> <span class="n">MyConsumer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress</span><span class="p">)</span>
    <span class="n">pcg</span> <span class="o">=</span> <span class="n">ProducerConsumerWithGenerator</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">ProducerWithGenerator</span><span class="p">(),</span> <span class="n">consumer</span><span class="p">)</span>
    <span class="n">pcg</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Producer is replaced with <a class="reference internal" href="#summer.pcg.ProducerWithGenerator" title="summer.pcg.ProducerWithGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerWithGenerator</span></code></a> which may be
left as is usually – it automatically iterates over provided iterable
returning one value at a time.  You can override
<a class="reference internal" href="#summer.pcg.ProducerWithGenerator.produce_from_slice" title="summer.pcg.ProducerWithGenerator.produce_from_slice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ProducerWithGenerator.produce_from_slice()</span></code></a> method which takes
single argument – the current iterator value.</p>
<p>You can also leverage <a class="reference internal" href="api-misc.html#summer.utils.chunks" title="summer.utils.chunks"><code class="xref py py-func docutils literal notranslate"><span class="pre">summer.utils.chunks()</span></code></a> function to split
large collection into smaller ones and produce chunks of data to decrease
race conditions in iteration over single iterator –
<a class="reference internal" href="#summer.pc.Consumer" title="summer.pc.Consumer"><code class="xref py py-class docutils literal notranslate"><span class="pre">summer.pc.Consumer</span></code></a> class consumes the whole chunks, not single
items, which may improve perfomance.</p>
<dl class="class">
<dt id="summer.pcg.ThreadSafeIterator">
<em class="property">class </em><code class="sig-prename descclassname">summer.pcg.</code><code class="sig-name descname">ThreadSafeIterator</code><span class="sig-paren">(</span><em class="sig-param">iterable: Iterable</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pcg.html#ThreadSafeIterator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ThreadSafeIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Iterator</span></code></p>
<p>Implements thread safe iteration over an iterable.</p>
<dl class="method">
<dt id="summer.pcg.ThreadSafeIterator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">iterable: Iterable</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pcg.html#ThreadSafeIterator.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ThreadSafeIterator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="summer.pcg.ThreadSafeIterator.__next__">
<code class="sig-name descname">__next__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pcg.html#ThreadSafeIterator.__next__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ThreadSafeIterator.__next__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the next item from the iterator. When exhausted, raise StopIteration</p>
</dd></dl>

<dl class="attribute">
<dt id="summer.pcg.ThreadSafeIterator.__weakref__">
<code class="sig-name descname">__weakref__</code><a class="headerlink" href="#summer.pcg.ThreadSafeIterator.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="summer.pcg.ProducerWithGenerator">
<em class="property">class </em><code class="sig-prename descclassname">summer.pcg.</code><code class="sig-name descname">ProducerWithGenerator</code><a class="reference internal" href="_modules/summer/pcg.html#ProducerWithGenerator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ProducerWithGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#summer.pc.Producer" title="summer.pc.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">summer.pc.Producer</span></code></a></p>
<p>Specific version of <a class="reference internal" href="#summer.pc.Producer" title="summer.pc.Producer"><code class="xref py py-class docutils literal notranslate"><span class="pre">summer.pc.Producer</span></code></a> for
<a class="reference internal" href="#summer.pcg.ProducerConsumerWithGenerator" title="summer.pcg.ProducerConsumerWithGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerConsumerWithGenerator</span></code></a> engine.</p>
<dl class="method">
<dt id="summer.pcg.ProducerWithGenerator.produce">
<code class="sig-name descname">produce</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pcg.html#ProducerWithGenerator.produce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ProducerWithGenerator.produce" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="xref py py-data docutils literal notranslate"><span class="pre">Producer.END_OF_PRODUCTION</span></code> object to indicate end of
production.</p>
</dd></dl>

<dl class="method">
<dt id="summer.pcg.ProducerWithGenerator.produce_from_slice">
<code class="sig-name descname">produce_from_slice</code><span class="sig-paren">(</span><em class="sig-param">generator_slice: object</em><span class="sig-paren">)</span> &#x2192; object<a class="reference internal" href="_modules/summer/pcg.html#ProducerWithGenerator.produce_from_slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ProducerWithGenerator.produce_from_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a slice and produce whatever needs to be produced.  Default
implementation just returns the slice (which is handy in case we
just want to iterate over provided iterable).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>generator_slice</strong> – single item from iteration, whatever it may be</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>whatever is desired, default implementation just</dt><dd><p>returns the passed item, which is reasonable if you
want just to iterate in parallel over iterable.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="summer.pcg.ProducerConsumerWithGenerator">
<em class="property">class </em><code class="sig-prename descclassname">summer.pcg.</code><code class="sig-name descname">ProducerConsumerWithGenerator</code><span class="sig-paren">(</span><em class="sig-param">iterable: Iterable</em>, <em class="sig-param">producer: summer.pcg.ProducerWithGenerator</em>, <em class="sig-param">consumer: summer.pc.Consumer</em>, <em class="sig-param">producer_thread_count=9</em>, <em class="sig-param">consumer_thread_count=9</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pcg.html#ProducerConsumerWithGenerator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ProducerConsumerWithGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#summer.pc.ProducerConsumer" title="summer.pc.ProducerConsumer"><code class="xref py py-class docutils literal notranslate"><span class="pre">summer.pc.ProducerConsumer</span></code></a></p>
<p>Specific implementation of <a class="reference internal" href="#summer.pc.ProducerConsumer" title="summer.pc.ProducerConsumer"><code class="xref py py-class docutils literal notranslate"><span class="pre">summer.pc.ProducerConsumer</span></code></a> that
adds thread-safe iteration over provided <em>iterable</em> object passing
single values to <a class="reference internal" href="#summer.pcg.ProducerWithGenerator" title="summer.pcg.ProducerWithGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerWithGenerator</span></code></a> instances one at a
time.</p>
<dl class="method">
<dt id="summer.pcg.ProducerConsumerWithGenerator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">iterable: Iterable</em>, <em class="sig-param">producer: summer.pcg.ProducerWithGenerator</em>, <em class="sig-param">consumer: summer.pc.Consumer</em>, <em class="sig-param">producer_thread_count=9</em>, <em class="sig-param">consumer_thread_count=9</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pcg.html#ProducerConsumerWithGenerator.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ProducerConsumerWithGenerator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates <a class="reference internal" href="#summer.pcg.ProducerConsumerWithGenerator" title="summer.pcg.ProducerConsumerWithGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerConsumerWithGenerator</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>iterable</strong> (<em>typing.Iterable</em>) – iterable over input values</p></li>
<li><p><strong>producer</strong> (<a class="reference internal" href="#summer.pc.Producer" title="summer.pc.Producer"><em>Producer</em></a>) – producer instance supplied by caller</p></li>
<li><p><strong>consumer</strong> (<a class="reference internal" href="#summer.pc.Consumer" title="summer.pc.Consumer"><em>Consumer</em></a>) – consumer instance supplied by caller</p></li>
<li><p><strong>producer_thread_count</strong> (<em>int</em>) – number of producer threads</p></li>
<li><p><strong>consumer_thread_count</strong> (<em>int</em>) – number of consumer threads</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="summer.pcg.ProducerThreadWithGenerator">
<em class="property">class </em><code class="sig-prename descclassname">summer.pcg.</code><code class="sig-name descname">ProducerThreadWithGenerator</code><span class="sig-paren">(</span><em class="sig-param">producer_consumer: summer.pcg.ProducerConsumerWithGenerator</em>, <em class="sig-param">producer: summer.pcg.ProducerWithGenerator</em>, <em class="sig-param">generator: summer.pcg.ThreadSafeIterator</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pcg.html#ProducerThreadWithGenerator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ProducerThreadWithGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#summer.pc.ProducerThread" title="summer.pc.ProducerThread"><code class="xref py py-class docutils literal notranslate"><span class="pre">summer.pc.ProducerThread</span></code></a></p>
<p>Thread executing producer instances
(ie. <a class="reference internal" href="#summer.pcg.ProducerWithGenerator" title="summer.pcg.ProducerWithGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">ProducerWithGenerator</span></code></a>).</p>
<dl class="method">
<dt id="summer.pcg.ProducerThreadWithGenerator.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">producer_consumer: summer.pcg.ProducerConsumerWithGenerator</em>, <em class="sig-param">producer: summer.pcg.ProducerWithGenerator</em>, <em class="sig-param">generator: summer.pcg.ThreadSafeIterator</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pcg.html#ProducerThreadWithGenerator.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ProducerThreadWithGenerator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>This constructor should always be called with keyword arguments. Arguments are:</p>
<p><em>group</em> should be None; reserved for future extension when a ThreadGroup
class is implemented.</p>
<p><em>target</em> is the callable object to be invoked by the run()
method. Defaults to None, meaning nothing is called.</p>
<p><em>name</em> is the thread name. By default, a unique name is constructed of
the form “Thread-N” where N is a small decimal number.</p>
<p><em>args</em> is the argument tuple for the target invocation. Defaults to ().</p>
<p><em>kwargs</em> is a dictionary of keyword arguments for the target
invocation. Defaults to {}.</p>
<p>If a subclass overrides the constructor, it must make sure to invoke
the base class constructor (Thread.__init__()) before doing anything
else to the thread.</p>
</dd></dl>

<dl class="method">
<dt id="summer.pcg.ProducerThreadWithGenerator.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/summer/pcg.html#ProducerThreadWithGenerator.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#summer.pcg.ProducerThreadWithGenerator.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Method representing the thread’s activity.</p>
<p>You may override this method in a subclass. The standard run() method
invokes the callable object passed to the object’s constructor as the
target argument, if any, with sequential and keyword arguments taken
from the args and kwargs arguments, respectively.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api-misc.html" class="btn btn-neutral float-right" title="Miscellaneous modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api-aop.html" class="btn btn-neutral float-left" title="AOP modules" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2020, martinslouf@users.sourceforge.net

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>