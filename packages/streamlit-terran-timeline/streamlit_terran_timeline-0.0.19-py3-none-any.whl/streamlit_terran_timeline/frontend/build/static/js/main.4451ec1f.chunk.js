/*! For license information please see main.4451ec1f.chunk.js.LICENSE.txt */
(this.webpackJsonpstreamlit_terran_timeline=this.webpackJsonpstreamlit_terran_timeline||[]).push([[0],{41:function(e,t,n){e.exports=n(51)},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a,r=n(7),o=n.n(r),s=n(27),i=n.n(s),l=(n(46),n(0)),c=n(1),u=n(2),d=n(3),m=n(28),h=n.n(m),p=n(6),g=n(29),f=n(13),v=function(){function e(t,n,a,r){var o=this;Object(l.a)(this,e),this.dataTable=void 0,this.indexTable=void 0,this.columnsTable=void 0,this.styler=void 0,this.getCell=function(e,t){var n=e<o.headerRows&&t<o.headerColumns,a=e>=o.headerRows&&t<o.headerColumns,r=e<o.headerRows&&t>=o.headerColumns;if(n){var s=["blank"];return t>0&&s.push("level"+e),{type:"blank",classNames:s.join(" "),content:""}}if(r){var i=t-o.headerColumns;return{type:"columns",classNames:["col_heading","level"+e,"col"+i].join(" "),content:o.getContent(o.columnsTable,i,e)}}if(a){var l=e-o.headerRows,c=["row_heading","level"+t,"row"+l];return{type:"index",id:"T_".concat(o.uuid,"level").concat(t,"_row").concat(l),classNames:c.join(" "),content:o.getContent(o.indexTable,l,t)}}var u=e-o.headerRows,d=t-o.headerColumns,m=["data","row"+u,"col"+d],h=o.styler?o.getContent(o.styler.displayValuesTable,u,d):o.getContent(o.dataTable,u,d);return{type:"data",id:"T_".concat(o.uuid,"row").concat(u,"_col").concat(d),classNames:m.join(" "),content:h}},this.getContent=function(e,t,n){var a=e.getColumnAt(n);if(null===a)return"";switch(o.getColumnTypeId(e,n)){case f.b.Timestamp:return o.nanosToDate(a.get(t));default:return a.get(t)}},this.dataTable=f.a.from(t),this.indexTable=f.a.from(n),this.columnsTable=f.a.from(a),this.styler=r?{caption:r.get("caption"),displayValuesTable:f.a.from(r.get("displayValues")),styles:r.get("styles"),uuid:r.get("uuid")}:void 0}return Object(d.a)(e,[{key:"getColumnTypeId",value:function(e,t){return e.schema.fields[t].type.typeId}},{key:"nanosToDate",value:function(e){return new Date(e/1e6)}},{key:"rows",get:function(){return this.indexTable.length+this.columnsTable.numCols}},{key:"columns",get:function(){return this.indexTable.numCols+this.columnsTable.length}},{key:"headerRows",get:function(){return this.rows-this.dataRows}},{key:"headerColumns",get:function(){return this.columns-this.dataColumns}},{key:"dataRows",get:function(){return this.dataTable.length}},{key:"dataColumns",get:function(){return this.dataTable.numCols}},{key:"uuid",get:function(){return this.styler&&this.styler.uuid}},{key:"caption",get:function(){return this.styler&&this.styler.caption}},{key:"styles",get:function(){return this.styler&&this.styler.styles}},{key:"table",get:function(){return this.dataTable}},{key:"index",get:function(){return this.indexTable}},{key:"columnTable",get:function(){return this.columnsTable}}]),e}();!function(e){e.COMPONENT_READY="streamlit:componentReady",e.SET_COMPONENT_VALUE="streamlit:setComponentValue",e.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(a||(a={}));var E=function e(){Object(l.a)(this,e)};E.API_VERSION=1,E.RENDER_EVENT="streamlit:render",E.events=new g.a,E.registeredMessageListener=!1,E.lastFrameHeight=void 0,E.setComponentReady=function(){E.registeredMessageListener||(window.addEventListener("message",E.onMessageEvent),E.registeredMessageListener=!0),E.sendBackMsg(a.COMPONENT_READY,{apiVersion:E.API_VERSION})},E.setFrameHeight=function(e){void 0===e&&(e=document.body.scrollHeight),e!==E.lastFrameHeight&&(E.lastFrameHeight=e,E.sendBackMsg(a.SET_FRAME_HEIGHT,{height:e}))},E.setComponentValue=function(e){E.sendBackMsg(a.SET_COMPONENT_VALUE,{value:e})},E.onMessageEvent=function(e){switch(e.data.type){case E.RENDER_EVENT:E.onRenderMessage(e.data)}},E.onRenderMessage=function(e){var t=e.args;null==t&&(console.error("Got null args in onRenderMessage. This should never happen"),t={});var n=e.dfs&&e.dfs.length>0?E.argsDataframeToObject(e.dfs):{};t=Object(p.a)(Object(p.a)({},t),n);var a=Boolean(e.disabled),r=new CustomEvent(E.RENDER_EVENT,{detail:{disabled:a,args:t}});E.events.dispatchEvent(r)},E.argsDataframeToObject=function(e){var t=e.map((function(e){var t=e.key,n=e.value;return[t,E.toArrowTable(n)]}));return Object.fromEntries(t)},E.toArrowTable=function(e){var t=e.data,n=t.data,a=t.index,r=t.columns;return new v(n,a,r)},E.sendBackMsg=function(e,t){window.parent.postMessage(Object(p.a)({isStreamlitMessage:!0,type:e},t),"*")};var y=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){E.setFrameHeight()}},{key:"componentDidUpdate",value:function(){E.setFrameHeight()}}]),n}(o.a.PureComponent);var b=n(9),T=function(e){var t=e.timeline,n=Object(r.useRef)(),a=function(e,t){if(null!==t){var n=85*Object.keys(t.appearance).length,a=t.end_time-t.start_time,r=b.b(e.current);r.attr("width",600).attr("height",n);var o=t.appearance[t.track_ids[0]].length,s=t.thumbnails,i=8,l=e.current.getBoundingClientRect().x,c=600/o,u=c*t.thumbnail_rate;t.track_ids.forEach((function(e,n){r.append("defs").append("clipPath").attr("id","face-".concat(n)).append("circle").attr("cx",22.5).attr("cy",22.5+i+12).attr("r",22.5),r.append("g").append("image").attr("x",0).attr("y",i+12).attr("width",45).attr("height",45).attr("xlink:href","data:image/png;base64,".concat(t.track_faces[e])).attr("clip-path","url(#face-".concat(n,")")).attr("transform","translate(posx, posy)");var o=b.b("body").append("div").attr("id","tooltip-".concat(e)).attr("class","tooltip").style("opacity",0);(function(e){var t,n,a=[],r={start:0};e.forEach((function(e,o){void 0!==t&e!==t&&(r.end=n,r.present=t,a.push(r),r={start:o}),n=o,t=e}));var o=e.length-1;return r=Object(p.a)(Object(p.a)({},r),{},{end:o,present:e[o]}),a.push(r),a})(t.appearance[e]).forEach((function(e,t){var d=e.present?"#2a9d8f":"#f4a261",m=e.present?"#264653":"#e76f51",h="d3-segment-".concat(n,"-").concat(t);r.append("rect").attr("id",h).attr("x",e.start*c).attr("y",i).attr("width",e.end*c-e.start*c).attr("height",8).style("fill",d).style("cursor","pointer").style("stroke-width",1).on("mouseover",(function(){b.b(h).style("fill",m);var e=Math.abs(b.a.pageX-l);if(s){o.transition().duration(200).style("opacity",1);var t=Math.min(Math.floor(e/u),s.length-1),a=n>1?-136:0;o.html('<img width="120" height="120" src="data:image/png;base64, '.concat(s[t],'" />')).style("left","".concat(b.a.pageX-64,"px")).style("top","".concat(b.a.pageY+a,"px"))}})).on("mouseout",(function(){b.b("#d3-segment-".concat(t)).style("fill",d),s&&o.transition().duration(500).style("opacity",0)})).on("click",(function(){var e=Math.abs(b.a.pageX-l);E.setComponentValue(a*(e/600))}))})),i+=85}))}};return Object(r.useEffect)((function(){a(n,t)}),[t]),o.a.createElement("svg",{ref:n})},w=function(e){var t=function(t){Object(c.a)(a,t);var n=Object(u.a)(a);function a(t){var r;return Object(l.a)(this,a),(r=n.call(this,t)).componentDidMount=function(){E.events.addEventListener(E.RENDER_EVENT,r.onRenderEvent),E.setComponentReady()},r.componentDidUpdate=function(){null!=r.state.componentError&&E.setFrameHeight()},r.componentWillUnmount=function(){E.events.removeEventListener(E.RENDER_EVENT,r.onRenderEvent)},r.onRenderEvent=function(e){var t=e;r.setState({renderData:t.detail})},r.render=function(){return null!=r.state.componentError?o.a.createElement("div",null,o.a.createElement("h1",null,"Component Error"),o.a.createElement("span",null,r.state.componentError.message)):null==r.state.renderData?null:o.a.createElement(e,{width:window.innerWidth,disabled:r.state.renderData.disabled,args:r.state.renderData.args})},r.state={renderData:void 0,componentError:void 0},r}return a}(o.a.PureComponent);return t.getDerivedStateFromError=function(e){return{componentError:e}},h()(t,e)}(function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){var t=e.props.args.timeline.track_ids.length;E.setFrameHeight(85*t+120)},e.render=function(){var t=e.props.args.timeline;return o.a.createElement("div",{className:"app"},o.a.createElement("main",{style:{margin:"20px"}},o.a.createElement(o.a.Fragment,null,o.a.createElement("section",{style:{margin:"20px"}},o.a.createElement(T,{timeline:t})))),o.a.createElement("footer",null,"Made with"," ",o.a.createElement("b",null,o.a.createElement("a",{href:"https://github.com/pento-group/terran"},o.a.createElement("img",{src:"/terran-square.svg",height:"64",width:"64"})))," ","by"," ",o.a.createElement("b",null,o.a.createElement("a",{href:"https://pento.ai"},"Pento"))))},e}return n}(y));n(50);i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(w,null)),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.4451ec1f.chunk.js.map