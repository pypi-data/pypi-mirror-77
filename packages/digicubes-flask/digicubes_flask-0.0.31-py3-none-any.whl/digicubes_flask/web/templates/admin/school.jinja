{% extends "admin/base.jinja" %}

{% block page_title %}
School
{% endblock %}

{% block sub_menu %}
    <li>
        <a href="{{ url_for('admin.update_school', school_id=school.id) }}">Edit</a>
    </li>
    <li>
        <a href="{{ url_for('admin.create_school_course', school_id=school.id) }}">New Course</a>
    </li>
    <li>
        <a href="{{ url_for('admin.delete_school', school_id=school.id) }}">Delete</a>
    </li>
{% endblock %}

{% block main_content %}
<div class="section">
    <div class="row">
        <div class="col s12">
            <h1>{{ school.name | nonefilter }}</h1>
            <h5 class="flowtext">{{ school.description | md }}</h5>
        </div>
    </div>
</div>

<div class="section">
    <div class="row">
        <div class="col s12">
            <h2>Teacher</h2>
        </div>
    </div>
    <div class="row">
        <div class="col s12">
            {% if teacher %}
                {{ teacher }}
            {% else %}
                <a href="{{ url_for('admin.create_school_course', school_id=school.id) }}" class="waves-effect waves-light light-blue btn-large">Add teacher</a>
            {% endif %}
        </div>
    </div>
</div>

<div class="section">
    <div class="row">
        <div class="col s12">
            <h2>Courses</h2>
            {% if courses %}
            <table class="highlight">
                <thead>
                <tr>
                    <th style="width: 20em;">Name</th>
                    <th style="width: 60em;">Description</th>
                    <th style="width: 10em;">From</th>
                    <th style="width: 10em;">Until</th>
                    <th style="width: 12em;">Created at</th>
                    <th style="width: 1em;"></th>
                </tr>
                <tbody class="dc-vtop">
            {% for course in courses %}
                <tr>
                    <td><a href="{{ url_for('admin.update_school_course', school_id=school.id, course_id=course.id) }}">{{ course.name | nonefilter }}</a></td>
                    <td>{{ course.description | md }}</td>
                    <td>{{ course.from_date | digidate }}</td>
                    <td>{{ course.until_date | digidate }}</td>
                    <td>{{ course.created_at | digidate }}</td> 
                    <td class="right-align dc-icon-column">
                        <a href="{{ url_for('admin.delete_course', school_id=school.id, course_id=course.id) }}">
                            <i class="material-icons red-text text-darken-3">delete</i>
                        </a>
                    </td>

                </tr>
            {% endfor %}
                </tbody>
            </table>
            {% else %}
            <a href="{{ url_for('admin.create_school_course', school_id=school.id) }}" class="waves-effect waves-light light-blue btn-large">Create your first course</a>
            {% endif %}
        </div>
    </div>
</div>

{% endblock %}

