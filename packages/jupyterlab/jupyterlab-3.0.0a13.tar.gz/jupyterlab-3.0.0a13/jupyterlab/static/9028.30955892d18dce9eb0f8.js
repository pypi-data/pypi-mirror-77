(window["webpackJsonp_jupyterlab_application_top"]=window["webpackJsonp_jupyterlab_application_top"]||[]).push([[9028,6344],{SzTQ:(e,t,i)=>{"use strict";i.r(t);i.d(t,{IMarkdownViewerTracker:()=>r,MarkdownDocument:()=>_,MarkdownViewer:()=>p,MarkdownViewerFactory:()=>f});var n=i("l37l");const r=new n.Token("@jupyterlab/markdownviewer:IMarkdownViewerTracker");var s=i("xUe3");var o=i("/Xld");var a=i("oPkZ");var d=i("gAOJ");var c=i("BQSE");var l=i("aV2H");const h="jp-MarkdownViewer";const u="text/markdown";class p extends l.Widget{constructor(e){super();this._config=Object.assign({},p.defaultConfig);this._fragment="";this._ready=new n.PromiseDelegate;this._isRendering=false;this._renderRequested=false;this.context=e.context;this.translator=e.translator||c.nullTranslator;this._trans=this.translator.load("jupyterlab");this.renderer=e.renderer;this.node.tabIndex=-1;this.addClass(h);const t=this.layout=new l.StackedLayout;t.addWidget(this.renderer);void this.context.ready.then(async()=>{await this._render();this._monitor=new o.ActivityMonitor({signal:this.context.model.contentChanged,timeout:this._config.renderTimeout});this._monitor.activityStopped.connect(this.update,this);this._ready.resolve(undefined)})}get ready(){return this._ready.promise}setFragment(e){this._fragment=e;this.update()}setOption(e,t){if(this._config[e]===t){return}this._config[e]=t;const{style:i}=this.renderer.node;switch(e){case"fontFamily":i.setProperty("font-family",t);break;case"fontSize":i.setProperty("font-size",t?t+"px":null);break;case"hideFrontMatter":this.update();break;case"lineHeight":i.setProperty("line-height",t?t.toString():null);break;case"lineWidth":{const e=t?`calc(50% - ${t/2}ch)`:null;i.setProperty("padding-left",e);i.setProperty("padding-right",e);break}case"renderTimeout":if(this._monitor){this._monitor.timeout=t}break;default:break}}dispose(){if(this.isDisposed){return}if(this._monitor){this._monitor.dispose()}this._monitor=null;super.dispose()}onUpdateRequest(e){if(this.context.isReady&&!this.isDisposed){void this._render();this._fragment=""}}onActivateRequest(e){this.node.focus()}async _render(){if(this.isDisposed){return}if(this._isRendering){this._renderRequested=true;return}this._renderRequested=false;const{context:e}=this;const{model:t}=e;const i=t.toString();const n={};n[u]=this._config.hideFrontMatter?m.removeFrontMatter(i):i;const r=new d.MimeModel({data:n,metadata:{fragment:this._fragment}});try{this._isRendering=true;await this.renderer.renderModel(r);this._isRendering=false;if(this._renderRequested){return this._render()}}catch(o){requestAnimationFrame(()=>{this.dispose()});void(0,s.showErrorMessage)(this._trans.__("Renderer Failure: %1",e.path),o)}}}(function(e){e.defaultConfig={fontFamily:null,fontSize:null,lineHeight:null,lineWidth:null,hideFrontMatter:true,renderTimeout:1e3}})(p||(p={}));class _ extends a.DocumentWidget{setFragment(e){this.content.setFragment(e)}}class f extends a.ABCWidgetFactory{constructor(e){super(m.createRegistryOptions(e));this._fileType=e.primaryFileType;this._rendermime=e.rendermime}createNewWidget(e){var t,i,n,r,s;const o=this._rendermime.clone({resolver:e.urlResolver});const a=o.createRenderer(u);const d=new p({context:e,renderer:a});d.title.icon=(t=this._fileType)===null||t===void 0?void 0:t.icon;d.title.iconClass=(n=(i=this._fileType)===null||i===void 0?void 0:i.iconClass)!==null&&n!==void 0?n:"";d.title.iconLabel=(s=(r=this._fileType)===null||r===void 0?void 0:r.iconLabel)!==null&&s!==void 0?s:"";const c=new _({content:d,context:e});return c}}var m;(function(e){function t(e){return Object.assign(Object.assign({},e),{readOnly:true})}e.createRegistryOptions=t;function i(e){const t=/^---\n[^]*?\n(---|...)\n/;const i=e.match(t);if(!i){return e}const{length:n}=i[0];return e.slice(n)}e.removeFrontMatter=i})(m||(m={}))}}]);